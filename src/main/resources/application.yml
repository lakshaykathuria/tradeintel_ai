spring:
  application:
    name: tradeintel-ai
  
  # Database Configuration
  datasource:
    url: jdbc:postgresql://localhost:5432/trading_platform
    username: lakshay
    password: Python043@
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: update  # Auto-create/update tables from entities
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    open-in-view: false
  
  # Flyway Configuration for Database Migrations
  flyway:
    enabled: true
    baseline-on-migrate: true
    baseline-version: 0
    locations: classpath:db/migration
    validate-on-migrate: true
  
  # Kafka Configuration
  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
      acks: all
      retries: 3
    consumer:
      group-id: trading-platform-group
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.JsonDeserializer
      auto-offset-reset: earliest
      properties:
        spring.json.trusted.packages: "*"
    topics:
      market-data: market-data-topic
      order-events: order-events-topic
      signal-events: signal-events-topic
      portfolio-updates: portfolio-updates-topic
  
  # AI Configuration (OpenAI)
  ai:
    openai:
      api-key: ${OPENAI_API_KEY}
      chat:
        options:
          model: gpt-5.1
          temperature: 0.7
  
  # Security Configuration
  security:
    user:
      name: ${SECURITY_USERNAME:admin}
      password: ${SECURITY_PASSWORD:admin123}

# Server Configuration
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /api

# Upstox API Configuration
upstox:
  api:
    api-key: ${UPSTOX_API_KEY}
    api-secret: ${UPSTOX_API_SECRET}
    redirect-url: ${UPSTOX_REDIRECT_URL:http://localhost:8080/api/upstox/callback}
    base-url: https://api.upstox.com/v2
  
# Trading Configuration
trading:
  mode: ${TRADING_MODE:PAPER_TRADING}  # REAL_MONEY or PAPER_TRADING
  paper-trading:
    initial-capital: 1000000.0  # 10 Lakhs for paper trading
    commission-per-trade: 20.0
  risk-management:
    max-position-size-percent: 10.0  # Max 10% of portfolio per position
    max-portfolio-risk-percent: 2.0   # Max 2% portfolio risk per trade
    max-daily-loss-percent: 5.0       # Stop trading if daily loss exceeds 5%
    max-drawdown-percent: 15.0        # Alert if drawdown exceeds 15%
    stop-loss-percent: 2.0            # Default stop loss percentage
    take-profit-percent: 5.0          # Default take profit percentage

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always
  prometheus:
    metrics:
      export:
        enabled: true

# Logging Configuration
logging:
  level:
    com.tradeintel.ai: DEBUG
    org.springframework.kafka: INFO
    org.springframework.ai: DEBUG
    org.hibernate.SQL: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
  file:
    name: logs/trading-platform.log

# Application Custom Properties
app:
  websocket:
    allowed-origins: "*"
    endpoint: /ws
  scheduler:
    market-data-refresh-rate: 1000  # milliseconds
    portfolio-update-rate: 5000     # milliseconds
  strategy:
    backtest:
      enabled: true
      default-period-days: 365
